---
title: ä¼˜é›…ç»ˆæ­¢çº¿ç¨‹æ–¹æ³•è§£æ
date: 2025-10-12
updated: 2025-10-12
category: "java"
tags: ["JUC","Thread","åŸç†åˆ†æ"]
excerpt: "å¦‚ä½•ä¼˜é›…çš„ç»ˆæ­¢çº¿ç¨‹ï¼Ÿå¦‚ä½•å®šä¹‰ä¼˜é›…ï¼Ÿ"
---

é¦–å…ˆå¯¹æ•´ç¯‡æ–‡ç« é‡ç‚¹å†…å®¹åšä¸€ä¸ªé¢„è§ˆ

![image-20251012155602234](https://raw.githubusercontent.com/zhaojianjun2004/picGo/master/img/image-20251012155602234.png)

## ä»€ä¹ˆæ˜¯â€ä¼˜é›…ç»ˆæ­¢çº¿ç¨‹â€œï¼Ÿ

> **ä¸æ˜¯æš´åŠ›æ€æ­»çº¿ç¨‹ï¼ˆå¦‚ `stop()`ï¼‰ï¼Œè€Œæ˜¯è®©çº¿ç¨‹â€œè‡ªå·±çŸ¥é“è¯¥åœäº†â€ï¼Œåœ¨å®‰å…¨ç‚¹ä¸»åŠ¨é€€å‡ºã€‚** 

ä¸ºä»€ä¹ˆéœ€è¦ä¼˜é›…ï¼Ÿç®€å•æ¥è¯´å°±æ˜¯ï¼š*æ•°æ®ä¸€è‡´æ€§ä¿è¯* + *é¿å…æ­»é”ä¸èµ„æºæ³„æ¼* + *ä¿è¯ä¸šåŠ¡å®Œæ•´æ€§*ã€‚

å› ä¸ºå¼ºåˆ¶æ€æ­»çº¿ç¨‹çš„æ—¶å€™ï¼Œå¯èƒ½çº¿ç¨‹æ­£åœ¨æ“ä½œå…±äº«èµ„æºï¼ˆå¯èƒ½å¯¼è‡´æ•°æ®ä¸ä¸€è‡´ï¼‰ / æŒæœ‰é”ï¼ˆå¯èƒ½å¯¼è‡´æ­»é”æˆ–èµ„æºæ³„æ¼ï¼‰ / æ‰§è¡Œå…³é”®ä¸šåŠ¡é€»è¾‘ï¼ˆå¯èƒ½ç ´åä¸šåŠ¡å®Œæ•´ï¼‰

## ä¸‰å¤§æ ¸å¿ƒæœºåˆ¶è¯¦è§£

### ä¸€ã€ä½¿ç”¨é€€å‡ºæ ‡å¿—ä½ç»ˆæ­¢çº¿ç¨‹

#### åŸç†åˆ†æï¼š

çº¿ç¨‹åœ¨`run()`æ–¹æ³•ä¸­ä¸»åŠ¨å¾ªç¯æ£€æµ‹ä¸€ä¸ªå¤–éƒ¨å®šä¹‰çš„`volatile boolean` ç±»å‹çš„é€€å‡ºæ ‡å¿—ä½ã€‚å½“å¤–éƒ¨çº¿ç¨‹å°†æ­¤æ ‡å¿—ä½è®¾ç½®ä¸º`false`æ—¶ï¼Œçº¿ç¨‹åœ¨ä¸‹ä¸€æ¬¡å¾ªç¯æ£€æµ‹æ—¶ä¼š**ä¸»åŠ¨é€€å‡ºå¾ªç¯å¹¶ç»“æŸæ‰§è¡Œ**ã€‚å…¶ä¸­`volatile`å…³é”®å­—å¯ä»¥ä¿è¯åœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸‹é€€å‡ºæ ‡å¿—ä½çš„ä¿®æ”¹å¯¹æ‰€æœ‰çº¿ç¨‹å¯è§ï¼Œè€Œé˜»å¡æ–¹æ³•ï¼ˆå¦‚`sleep()`ã€`wait()`ï¼‰è¢«ä¸­æ–­æ—¶ä¼šæŠ›å‡º`InterruptException`å¼‚å¸¸ï¼Œæ­¤æ—¶çº¿ç¨‹åº”è¯¥æ•è·å¼‚å¸¸å¹¶ä¸»åŠ¨è®¾ç½®é€€å‡ºæ ‡å¿—ä½æˆ–ç›´æ¥é€€å‡ºï¼Œä»¥å®ç°å¯¹ä¸­æ–­ä¿¡å·çš„å“åº”ã€‚ä»è€Œä¿è¯çº¿ç¨‹åœ¨å®‰å…¨ç‚¹é€€å‡ºï¼Œé¿å…èµ„æºæ³„æ¼æˆ–æ•°æ®ä¸ä¸€è‡´ç­‰é—®é¢˜ã€‚

#### ä»£ç å‘ˆç°ï¼š

```java
/**
 * æ¨¡æ‹Ÿçº¿ç¨‹é€€å‡ºæ ‡å¿—ä½ å®ç°ç»ˆæ­¢çº¿ç¨‹
 */
public class FlagBasedThread implements Runnable {
    private volatile boolean flag = true;

    @Override
    public void run() {
        while (flag) {
            System.out.println("çº¿ç¨‹æ­£åœ¨è¿è¡Œ...");
            try {
                Thread.sleep(1000);
            } catch (InterruptedException e) {
                System.out.println("çº¿ç¨‹è¢«ä¸­æ–­");
                flag = false;
                Thread.currentThread().interrupt(); // é‡æ–°è®¾ç½®ä¸­æ–­æ ‡å¿—
            }
        }
        System.out.println("çº¿ç¨‹ç»“æŸ");
    }

    public void shutdown() {
        flag = false;
    }

    public static void main(String[] args) throws InterruptedException {
        FlagBasedThread runnable = new FlagBasedThread();
        Thread thread = new Thread(runnable);
        thread.start();
        Thread.sleep(3000); // ä¸»çº¿ç¨‹ç¡çœ 3ç§’åæ‰§è¡Œåç»­æ“ä½œ
        System.out.println("å‡†å¤‡å…³é—­çº¿ç¨‹");
        thread.interrupt(); // æ˜¾å¼ä¸­æ–­çº¿ç¨‹
        runnable.shutdown();
        thread.join();
        System.out.println("çº¿ç¨‹å·²å…³é—­");
    }
}
```

è¾“å‡ºç»“æœï¼š

![image-20251012163636700](https://raw.githubusercontent.com/zhaojianjun2004/picGo/master/img/image-20251012163636700.png)

è¿™é‡Œâ€çº¿ç¨‹è¢«ä¸­æ–­â€œæ˜¯æˆ‘ä»¬ä½¿ç”¨äº†`thread.interrupt()`ï¼Œå½“çº¿ç¨‹åœ¨è°ƒç”¨`Thread.sleep()`æ—¶è¢«ä¸­æ–­ï¼ŒæŠ›å‡ºå¼‚å¸¸å¹¶è¢«æ•è·ï¼Œè¿›å…¥catchå—ä¸­ã€‚ä¹Ÿå³æ˜¯è¯´ï¼Œå¦‚æœé˜»å¡æ–¹æ³•æ²¡æœ‰è¢«ä¸­æ–­ï¼Œå°±è‡ªç„¶æ²¡æœ‰å¼‚å¸¸ã€‚

### äºŒã€`Thread.interrupt()` ä¸­æ–­ä¿¡å·ï¼ˆjavaæ ‡å‡†åä½œæœºåˆ¶ï¼‰

#### åŸç†åˆ†æï¼š

`Thread.interrupt()`æ˜¯javaæä¾›çš„æ ‡å‡†çº¿ç¨‹åä½œæœºåˆ¶ï¼Œç”¨äº**é€šçŸ¥**çº¿ç¨‹**åº”è¯¥ä¸­æ–­å…¶å½“å‰æ“ä½œ**å¹¶å°½å¿«é€€å‡ºã€‚å·¥ä½œæ–¹å¼åˆ†ä¸ºä¸¤ç§æƒ…å†µï¼š

- **çº¿ç¨‹å¤„äºå¯ä¸­æ–­çš„é˜»å¡æˆ–ç­‰å¾…çŠ¶æ€**ï¼šå½“çº¿ç¨‹ä½¿ç”¨äº†é˜»å¡æ–¹æ³•ï¼ˆ`Thread.sleep()`æˆ–åŒæ­¥é”çš„`wait()`ç­‰ï¼‰æ—¶ï¼Œå¦‚æœ**å…¶ä»–çº¿ç¨‹**è°ƒç”¨äº†`interrupt()`æ–¹æ³•ï¼Œä¼šæ¸…é™¤è¯¥çº¿ç¨‹çš„ä¸­æ–­æ ‡å¿—ï¼Œå¹¶æŠ›å‡º`InterruptedException`ã€‚é€šè¿‡æ•è·è¯¥å¼‚å¸¸ï¼Œçº¿ç¨‹å¯ä»¥åœ¨catchå—ä¸­æ‰§è¡Œæ¸…ç†å·¥ä½œå¹¶å®‰å…¨é€€å‡ºã€‚ä¸ºäº†ä¿è¯ä¸­æ–­ä¿¡å·èƒ½ç»§ç»­ä¼ æ’­ï¼Œé€šå¸¸éœ€è¦åœ¨catchå—ä¸­è°ƒç”¨`Thread.currentThread().interrupt()`é‡æ–°è®¾ç½®ä¸­æ–­çŠ¶æ€ã€‚
- **çº¿ç¨‹æœªå¤„äºé˜»å¡çŠ¶æ€**ï¼šå¦‚æœçº¿ç¨‹æ²¡æœ‰è°ƒç”¨é˜»å¡æ–¹æ³•ï¼Œ`interrupt()`ä¸ä¼šæŠ›å‡ºå¼‚å¸¸ï¼Œè€Œæ˜¯ç®€å•çš„è®¾ç½®çº¿ç¨‹çš„ä¸­æ–­æ ‡å¿—ã€‚æ­¤æ—¶ï¼Œçº¿ç¨‹å¯ä»¥é€šè¿‡è°ƒç”¨`Thread.currentThread().isInterrupted()`æˆ–`Thread.interrupted()`æ£€æŸ¥ä¸­æ–­çŠ¶æ€ï¼Œå¹¶åœ¨é€‚å½“çš„ä½ç½®ä¸»åŠ¨é€€å‡ºã€‚è¿™ç§æ–¹å¼ç±»ä¼¼äºè‡ªå®šä¹‰æ ‡å¿—ä½ï¼Œä½†æ˜¯interrupt()æ˜¯javaæ ‡å‡†çš„çº¿ç¨‹åä½œæœºåˆ¶ï¼Œæ›´åŠ è§„èŒƒå’Œå®‰å…¨ã€‚

#### ä»£ç å‘ˆç°ï¼š

```java
public class InterruptThread implements Runnable{
    @Override
    public void run() {
        try {
            // æ¨¡æ‹Ÿé˜»å¡çŠ¶æ€
            while (!Thread.currentThread().isInterrupted()) {
                System.out.println("çº¿ç¨‹æ­£åœ¨è¿è¡Œ...");
                Thread.sleep(1000); // é˜»å¡æ–¹æ³•
            }
        } catch (InterruptedException e) {
            System.out.println("çº¿ç¨‹è¢«ä¸­æ–­ï¼Œæ•è· InterruptedException");
            Thread.currentThread().interrupt(); // é‡æ–°è®¾ç½®ä¸­æ–­çŠ¶æ€
        }

        // æ£€æŸ¥ä¸­æ–­æ ‡å¿—ï¼Œæ‰§è¡Œæ¸…ç†å·¥ä½œ
        if (Thread.currentThread().isInterrupted()) {
            System.out.println("çº¿ç¨‹ä¸­æ–­æ ‡å¿—å·²è®¾ç½®ï¼Œæ‰§è¡Œæ¸…ç†å·¥ä½œ...");
        }

        System.out.println("çº¿ç¨‹ç»“æŸ");
    }

    public static void main(String[] args) throws InterruptedException {
        Thread thread = new Thread(new InterruptThread());
        thread.start();

        // ä¸»çº¿ç¨‹ç­‰å¾… 3 ç§’åä¸­æ–­å­çº¿ç¨‹
        Thread.sleep(3000);
        System.out.println("å‡†å¤‡ä¸­æ–­çº¿ç¨‹");
        thread.interrupt();

        // ç­‰å¾…å­çº¿ç¨‹ç»“æŸ
        thread.join(); // joinæ–¹æ³•ï¼šç­‰å¾…å­çº¿ç¨‹ç»“æŸï¼Œç¡®ä¿ä¸»çº¿ç¨‹èƒ½æ­£ç¡®ç»“æŸ
        System.out.println("çº¿ç¨‹å·²å…³é—­");
    }
}
```

### ä¸‰ã€stop()/destroy() -- å·²åºŸå¼ƒ

#### åŸç†åˆ†æï¼š

stop() æ–¹æ³•ä¼šå¼ºåˆ¶ç«‹å³ç»ˆæ­¢çº¿ç¨‹çš„æ‰§è¡Œï¼Œæ— è®ºçº¿ç¨‹å½“å‰å¤„äºä»€ä¹ˆçŠ¶æ€ï¼ˆåŒ…æ‹¬æŒæœ‰é”ã€æ­£åœ¨å†™æ–‡ä»¶ã€æ›´æ–°æ•°æ®åº“ç­‰ï¼‰ï¼Œè¿™ä¼šå¯¼è‡´å…±äº«èµ„æºå¤„äºä¸ä¸€è‡´çŠ¶æ€ã€é”æœªé‡Šæ”¾å¼•å‘æ­»é”ã€æ–‡ä»¶æœªå…³é—­é€ æˆèµ„æºæ³„æ¼ã€ç”šè‡³jvmå†…éƒ¨çŠ¶æ€æŸåã€‚destroy()æ›´æ˜¯ä»æœªçœŸæ­£å®ç°è¿‡ï¼Œä»…ä½œä¸ºå ä½ç¬¦å­˜åœ¨ï¼Œå› ä¸ºç ´åäº†çº¿ç¨‹çš„å®‰å…¨æ€§å’Œä¸€è‡´æ€§ï¼Œè‡ªjdk1.2èµ·å°±è¢«å®˜æ–¹å¼ƒç”¨ã€‚

### å››ã€`interrupt()`ä¸é€€å‡ºæ ‡å¿—çš„æœ¬è´¨åŒºåˆ«ä¸è”ç³»

ç»“è®ºï¼š

> `interrupt()` æ˜¯**javaå®˜æ–¹å®šä¹‰**çš„ï¼Œæ ‡å‡†åŒ–çš„â€çº¿ç¨‹åä½œä¸­æ–­åè®®â€œï¼Œå®ƒä¸ä»…æ˜¯ä¸€ä¸ªå¸ƒå°”æ ‡å¿—ï¼Œè¿˜å…·å¤‡**â€è·¨é˜»å¡å”¤é†’â€œ**èƒ½åŠ›ï¼Œè€Œè‡ªå®šä¹‰çš„`volatile boolean`åªæ˜¯ä¸€ä¸ªæ™®é€šçš„çŠ¶æ€å˜é‡ï¼Œæ— æ³•å”¤é†’é˜»å¡ä¸­çš„çº¿ç¨‹ã€‚

`Interrupt()+ IsInterrupted()` ç”±jvmä¿è¯ï¼Œå¤©ç„¶çº¿ç¨‹å®‰å…¨ï¼Œè°ƒç”¨`interrupt()`ä¼šç«‹å³ä¸­æ–­`sleep()/wait()/join()`ç­‰é˜»å¡æ“ä½œï¼ŒæŠ›å‡º`InterruptedException`ã€‚è€Œè‡ªå®šä¹‰`volatile boolean`å˜é‡åœ¨`sleep()`ä¸­æ— æ³•æ„ŸçŸ¥é€€å‡ºæ ‡å¿—çš„å˜åŒ–ï¼Œå¿…é¡»ç­‰`sleep()`è‡ªç„¶ç»“æŸã€‚

#### éé˜»å¡åœºæ™¯ä¸‹çš„åŒºåˆ†

ç›¸åŒç‚¹ï¼šéƒ½éœ€è¦åœ¨å¾ªç¯ä¸­**ä¸»åŠ¨æ£€æŸ¥çŠ¶æ€**ï¼ˆisInterrupted() æˆ– runningï¼‰ã€‚éƒ½ä¾èµ–â€œåä½œå¼â€é€€å‡ºï¼ˆçº¿ç¨‹è‡ªå·±å†³å®šä½•æ—¶åœï¼‰ã€‚éƒ½éœ€è¦ **volatile è¯­ä¹‰**ï¼ˆisInterrupted() å†…éƒ¨å·²ä¿è¯ï¼‰

ä¸åŒç‚¹ï¼šè¯­ä¹‰è§„èŒƒæ€§ï¼ˆ`interrupt()`è¯­ä¹‰æ›´æ¸…æ™°ï¼Œè¡¨ç¤ºè¿™æ˜¯ä¸€ä¸ªæ ‡å‡†çš„ä¸­æ–­è¯·æ±‚ï¼Œæ— éœ€é¢å¤–çš„æ³¨é‡Šè¯´æ˜ï¼‰ã€‚ä¸**javaç”Ÿæ€å…¼å®¹**ï¼Œå¦‚æœä½ æŠŠçº¿ç¨‹äº¤ç»™ `ExecutorService`ï¼Œè°ƒç”¨ `shutdownNow()` ä¼šè‡ªåŠ¨` interrupt() `æ‰€æœ‰ä»»åŠ¡çº¿ç¨‹ã€‚

#### å åŠ ä½¿ç”¨

å®Œæ•´ä»£ç 

```java
package com.zhaojj.executors.thread;

/**
 * å åŠ ä½¿ç”¨interrupt() å’Œ é€€å‡ºæ ‡å¿—æ–¹æ³•åœæ­¢çº¿ç¨‹
 */
// å®ç° Runnable è€Œéç»§æ‰¿ Threadï¼šæ›´çµæ´»
public class InterruptThread implements Runnable {

    /* ã€è®¾è®¡ç‚¹1ã€‘è‡ªå®šä¹‰é€€å‡ºæ ‡å¿—ï¼Œç”¨äºä¸šåŠ¡è¯­ä¹‰æ§åˆ¶
     volatile ä¿è¯å¤šçº¿ç¨‹å¯è§æ€§ï¼šä¸»çº¿ç¨‹ä¿®æ”¹åï¼Œå·¥ä½œçº¿ç¨‹èƒ½ç«‹å³çœ‹åˆ° 
     */
    private volatile boolean flag = true;

    /* ã€è®¾è®¡ç‚¹2ã€‘æŒæœ‰å¯¹å·¥ä½œçº¿ç¨‹çš„å¼•ç”¨ï¼Œä¾¿äºå¤–éƒ¨æ§åˆ¶
     æ³¨æ„ï¼šä¸èƒ½åœ¨ run() ä¸­ç›´æ¥æ“ä½œ Thread.currentThread() æ¥ interruptï¼Œå› ä¸º shutdown() æ˜¯åœ¨ä¸»çº¿ç¨‹è°ƒç”¨çš„ 
     */
    private Thread workerThread;

    /* ã€å°è£… start() æ–¹æ³•ã€‘
     ç›®çš„ï¼šéšè—çº¿ç¨‹åˆ›å»ºç»†èŠ‚ï¼Œå¯¹å¤–æä¾›ç»Ÿä¸€å…¥å£
     ä¸ºä»€ä¹ˆä¸ç”¨ new Thread(...).start() ç›´æ¥å¯åŠ¨ï¼Ÿâ€”â€”ä¸ºäº†åç»­èƒ½ hold ä½ workerThread å¼•ç”¨
     */
    public void start() {
        workerThread = new Thread(this); // this æ˜¯ Runnable å®ä¾‹ï¼Œä¼ ç»™æ–°çº¿ç¨‹æ‰§è¡Œ run()
        workerThread.start();            // å¯åŠ¨å·¥ä½œçº¿ç¨‹
    }

    @Override
    public void run() {
        try {
             /*ã€å…³é”®å¾ªç¯æ¡ä»¶ã€‘åŒé‡æ£€æŸ¥ï¼šæ—¢è¦å“åº”æ ‡å‡†ä¸­æ–­ï¼Œä¹Ÿè¦å“åº”ä¸šåŠ¡å…³é—­è¯·æ±‚
             - !Thread.currentThread().isInterrupted()ï¼šå“åº” interrupt() ä¿¡å·
             - flagï¼šå“åº” shutdown() ä¸­çš„ flag = false
             ä¸¤è€…ä»»ä¸€ä¸º falseï¼Œå¾ªç¯é€€å‡º 
             */
            while (!Thread.currentThread().isInterrupted() && flag) {
                System.out.println("çº¿ç¨‹æ­£åœ¨è¿è¡Œ...");
                Thread.sleep(1000); // æ¨¡æ‹Ÿè€—æ—¶/é˜»å¡æ“ä½œï¼ˆå¦‚ç½‘ç»œIOã€å®šæ—¶ä»»åŠ¡ï¼‰
            }
        } catch (InterruptedException e) {
            // ã€é‡è¦ã€‘å½“ sleep() è¢« interrupt() ä¸­æ–­æ—¶ï¼Œä¼šæŠ›å‡ºæ­¤å¼‚å¸¸
            System.out.println("çº¿ç¨‹è¢«ä¸­æ–­ï¼Œæ•è· InterruptedException");

            /* ã€å…³é”®æ“ä½œã€‘é‡æ–°è®¾ç½®ä¸­æ–­çŠ¶æ€ï¼
             åŸå› ï¼šJVM åœ¨æŠ›å‡º InterruptedException æ—¶ä¼šè‡ªåŠ¨æ¸…é™¤ä¸­æ–­æ ‡å¿—
             å¦‚æœä¸æ¸…é™¤ï¼Œä¸Šå±‚ä»£ç ï¼ˆæ¯”å¦‚è°ƒç”¨æ ˆä¸­çš„å…¶ä»–æ–¹æ³•ï¼‰æ— æ³•çŸ¥é“â€œæ›¾è¢«ä¸­æ–­è¿‡â€
             è™½ç„¶æ­¤å¤„æˆ‘ä»¬é©¬ä¸Šè¦é€€å‡ºï¼Œä½†è¿™æ˜¯è‰¯å¥½å®è·µï¼Œå°¤å…¶åœ¨å¤æ‚ç³»ç»Ÿä¸­ 
             */
            Thread.currentThread().interrupt();
        }

        // ã€æ¸…ç†é˜¶æ®µã€‘æ£€æŸ¥æ˜¯å¦å› ä¸­æ–­é€€å‡ºï¼ˆå¯é€‰ï¼Œç”¨äºæ—¥å¿—æˆ–èµ„æºé‡Šæ”¾ï¼‰
        if (Thread.currentThread().isInterrupted()) {
            System.out.println("çº¿ç¨‹ä¸­æ–­æ ‡å¿—å·²è®¾ç½®ï¼Œæ‰§è¡Œæ¸…ç†å·¥ä½œ...");
            // æ­¤å¤„å¯å…³é—­æ•°æ®åº“è¿æ¥ã€é‡Šæ”¾æ–‡ä»¶å¥æŸ„ã€å‘é€ç›‘æ§æŒ‡æ ‡ç­‰
        }

        System.out.println("çº¿ç¨‹ç»“æŸ");
    }

    /* ã€å°è£… shutdown() æ–¹æ³•ã€‘
     ç›®çš„ï¼šæä¾›ç»Ÿä¸€ã€å®‰å…¨çš„å…³é—­å…¥å£*/
    public void shutdown() {
        // 1. è®¾ç½®ä¸šåŠ¡æ ‡å¿—ä½ï¼šé€šçŸ¥ run() å¾ªç¯ä¸‹æ¬¡æ£€æŸ¥æ—¶é€€å‡ºï¼ˆé€‚ç”¨äºéé˜»å¡åœºæ™¯ï¼‰
        flag = false;

        // 2. ä¸­æ–­å·¥ä½œçº¿ç¨‹ï¼šç¡®ä¿å³ä½¿çº¿ç¨‹æ­£åœ¨ sleep() ç­‰é˜»å¡æ“ä½œï¼Œä¹Ÿèƒ½ç«‹å³å”¤é†’
        if (workerThread != null) {
            workerThread.interrupt(); // æ³¨æ„ï¼šè¿™æ˜¯åœ¨ä¸»çº¿ç¨‹ä¸­è°ƒç”¨ï¼Œä¸­æ–­çš„æ˜¯ workerThread
        }
        /* ğŸ’¡ ä¸ºä»€ä¹ˆä¸¤è€…éƒ½è¦åšï¼Ÿ
         - å¦‚æœåªè®¾ flagï¼Œçº¿ç¨‹åœ¨ sleep(1000) ä¸­æ— æ³•åŠæ—¶é€€å‡ºï¼ˆè¦ç­‰1ç§’ï¼‰
         - å¦‚æœåª interrupt()ï¼Œä¸‡ä¸€ run() å¾ªç¯æ²¡æ£€æŸ¥ isInterrupted()ï¼ˆæ¯”å¦‚æ¼å†™äº†ï¼‰ï¼Œå¯èƒ½æ— æ³•é€€å‡º
         â†’ åŒä¿é™©ï¼è¦†ç›–æ‰€æœ‰åœºæ™¯ 
         */
    }

    // ã€å°è£… join() æ–¹æ³•ã€‘
    // ç›®çš„ï¼šè®©è°ƒç”¨æ–¹ï¼ˆå¦‚ mainï¼‰èƒ½ç­‰å¾…å·¥ä½œçº¿ç¨‹çœŸæ­£ç»“æŸï¼Œé¿å…ä¸»çº¿ç¨‹æå‰é€€å‡º
    public void join() throws InterruptedException {
        if (workerThread != null) {
            workerThread.join(); // é˜»å¡å½“å‰çº¿ç¨‹ï¼ˆmainï¼‰ï¼Œç›´åˆ° workerThread æ‰§è¡Œå®Œæ¯•
        }
    }

    // â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€” ä¸»æ–¹æ³•ï¼šæ¼”ç¤ºçº¿ç¨‹äº¤äº’ â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”
    public static void main(String[] args) throws InterruptedException {
        // 1. åˆ›å»ºä»»åŠ¡å¯¹è±¡ï¼ˆå°šæœªå¯åŠ¨çº¿ç¨‹ï¼‰
        InterruptThread task = new InterruptThread();

        // 2. å¯åŠ¨å·¥ä½œçº¿ç¨‹ï¼ˆå†…éƒ¨åˆ›å»ºå¹¶ start äº†ä¸€ä¸ªæ–°çº¿ç¨‹ï¼‰
        task.start();

        /* ğŸ”„ æ­¤æ—¶æœ‰ä¸¤ä¸ªçº¿ç¨‹åœ¨è¿è¡Œï¼š
           - main çº¿ç¨‹ï¼šç»§ç»­æ‰§è¡Œä¸‹é¢çš„ä»£ç 
           - workerThreadï¼šæ‰§è¡Œ task.run()ï¼Œæ¯ç§’æ‰“å°â€œçº¿ç¨‹æ­£åœ¨è¿è¡Œ...â€
           */

        // 3. main çº¿ç¨‹ä¼‘çœ  3 ç§’ï¼Œæ¨¡æ‹Ÿâ€œè¿è¡Œä¸€æ®µæ—¶é—´åéœ€è¦å…³é—­â€
        Thread.sleep(3000);

        // 4. main çº¿ç¨‹è°ƒç”¨ shutdown()ï¼Œé€šçŸ¥å·¥ä½œçº¿ç¨‹é€€å‡º
        System.out.println("å‡†å¤‡ä¸­æ–­çº¿ç¨‹");
        task.shutdown(); // â†’ è®¾ç½® flag = false + è°ƒç”¨ workerThread.interrupt()

        /* ğŸ”„ æ­¤åˆ» workerThread çš„çŠ¶æ€ï¼š
           - å¦‚æœå®ƒæ­£åœ¨ sleep(1000)ï¼Œä¼šè¢«ç«‹å³å”¤é†’ï¼ŒæŠ›å‡º InterruptedException
           - å¦‚æœå®ƒåˆšæ‰“å°å®Œï¼Œæ­£åœ¨æ£€æŸ¥å¾ªç¯æ¡ä»¶ï¼Œä¼šå‘ç° flag=false æˆ– isInterrupted=trueï¼Œç›´æ¥é€€å‡ºå¾ªç¯
           */

        // 5. main çº¿ç¨‹ç­‰å¾… workerThread çœŸæ­£ç»“æŸï¼ˆjoin é˜»å¡ç›´åˆ° run() æ‰§è¡Œå®Œæ¯•ï¼‰
        task.join();

        // 6. workerThread å·²é€€å‡ºï¼Œmain çº¿ç¨‹ç»§ç»­æ‰§è¡Œ
        System.out.println("çº¿ç¨‹å·²å…³é—­");
        // â†’ ç¨‹åºæ­£å¸¸ç»“æŸ
    }
}

```

mainä¸­çš„çº¿ç¨‹äº¤äº’è¿‡ç¨‹

![image-20251012183129611](https://raw.githubusercontent.com/zhaojianjun2004/picGo/master/img/image-20251012183129611.png)

