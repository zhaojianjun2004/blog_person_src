<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>功能测试页面</title>
    <link rel="stylesheet" href="css/main-styles.css">
    <link rel="stylesheet" href="css/tech-landing.css">
    <link rel="stylesheet" href="css/pagination-styles.css">
</head>
<body>
    <div class="tech-container">
        <div class="tech-content">
            <h1>博客功能测试</h1>
            
            <div class="test-section">
                <h2>1. 文章页面分页测试</h2>
                <p>当前设置：每页显示9篇文章</p>
                <a href="articles.html" target="_blank">→ 测试文章分页</a>
            </div>
            
            <div class="test-section">
                <h2>2. 搜索和分类过滤测试</h2>
                <p>测试搜索功能与分类切换的冲突解决</p>
                <a href="articles.html?search=java" target="_blank">→ 测试搜索过滤</a>
            </div>
            
            <div class="test-section">
                <h2>3. 分类页面标签跳转测试</h2>
                <p>测试点击标签后的跳转和数据加载</p>
                <a href="categories.html" target="_blank">→ 测试标签跳转</a>
            </div>
            
            <div class="test-section">
                <h2>4. 文章详情页面美化测试</h2>
                <p>测试文章详情页面的TOC和交互效果</p>
                <a href="article-detail.html?filename=java-best-practices.md" target="_blank">→ 测试文章详情</a>
            </div>
            
            <div class="api-test">
                <h2>API测试</h2>
                <button onclick="testAPI()">测试所有API接口</button>
                <div id="api-results"></div>
            </div>
        </div>
    </div>

    <script>
        async function testAPI() {
            const results = document.getElementById('api-results');
            results.innerHTML = '<p>测试中...</p>';
            
            const tests = [
                { name: '文章列表', url: '/api/articles' },
                { name: '分类统计', url: '/api/categories-stats' },
                { name: '标签列表', url: '/api/tags' }
            ];
            
            let output = '<h3>API测试结果:</h3>';
            
            for (const test of tests) {
                try {
                    const response = await fetch(test.url);
                    const data = await response.json();
                    output += `<p><strong>${test.name}:</strong> ✅ 成功 (${Array.isArray(data) ? data.length : Object.keys(data).length} 项)</p>`;
                } catch (error) {
                    output += `<p><strong>${test.name}:</strong> ❌ 失败 - ${error.message}</p>`;
                }
            }
            
            results.innerHTML = output;
        }
        
        // 页面加载时自动测试
        window.onload = () => {
            setTimeout(testAPI, 1000);
        };
    </script>

    <style>
        .test-section {
            margin: 2rem 0;
            padding: 1.5rem;
            background: var(--card-bg);
            border: 1px solid var(--tech-border);
            border-radius: 12px;
        }
        
        .test-section h2 {
            color: var(--tech-primary);
            margin-bottom: 1rem;
        }
        
        .test-section a {
            display: inline-block;
            margin-top: 1rem;
            padding: 0.8rem 1.5rem;
            background: var(--tech-primary);
            color: var(--tech-bg);
            text-decoration: none;
            border-radius: 8px;
            transition: all 0.3s ease;
        }
        
        .test-section a:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 255, 255, 0.3);
        }
        
        .api-test {
            margin-top: 3rem;
            padding: 2rem;
            background: rgba(0, 255, 255, 0.1);
            border-radius: 12px;
        }
        
        .api-test button {
            padding: 1rem 2rem;
            background: var(--tech-primary);
            color: var(--tech-bg);
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1rem;
        }
        
        #api-results {
            margin-top: 1rem;
            padding: 1rem;
            background: var(--card-bg);
            border-radius: 8px;
            min-height: 100px;
        }
    </style>
</body>
</html>